"use strict";(self.webpackChunkcommerce_frontend_core=self.webpackChunkcommerce_frontend_core||[]).push([[4538],{20738:function(e,a,t){t.r(a),t.d(a,{_frontmatter:function(){return o},default:function(){return g}});var n,m=t(87462),r=t(63366),d=(t(15007),t(64983)),i=t(91515),l=["components"],o={},p=(n="InlineAlert",function(e){return console.warn("Component "+n+" was not imported, exported, or provided by MDXProvider as global scope"),(0,d.mdx)("div",e)}),s={_frontmatter:o},c=i.Z;function g(e){var a=e.components,t=(0,r.Z)(e,l);return(0,d.mdx)(c,(0,m.Z)({},s,t,{components:a,mdxType:"MDXLayout"}),(0,d.mdx)("h1",{id:"configure-theme-properties"},"Configure theme properties"),(0,d.mdx)("p",null,"The properties of product images used on the ",(0,d.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/storefront"},"storefront")," are stored in the ",(0,d.mdx)("inlineCode",{parentName:"p"},"view.xml")," configuration file. This topic provides all details about what properties are available and how to configure them."),(0,d.mdx)("p",null,"The properties for the images displayed on the product pages are defined by the gallery widget options. The options of the widget can be configured in the ",(0,d.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/theme"},"theme")," ",(0,d.mdx)("inlineCode",{parentName:"p"},"view.xml")," as well. For more details, view the ",(0,d.mdx)("a",{parentName:"p",href:"../../javascript/jquery-widgets/gallery.md"},"Gallery widget")," topic."),(0,d.mdx)("h2",{id:"configure-image-properties"},"Configure image properties"),(0,d.mdx)("p",null,"The conventional location of ",(0,d.mdx)("inlineCode",{parentName:"p"},"view.xml")," for a theme is:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-text"},"<theme_dir>/etc/view.xml\n")),(0,d.mdx)("p",null,"For example, here is the ",(0,d.mdx)("inlineCode",{parentName:"p"},"view.xml")," of the Blank theme: ",(0,d.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/app/design/frontend/Magento/blank/etc/view.xml"},(0,d.mdx)("inlineCode",{parentName:"a"},"app/design/frontend/Magento/blank/etc/view.xml")),"."),(0,d.mdx)("p",null,"In ",(0,d.mdx)("inlineCode",{parentName:"p"},"view.xml"),", image properties are configured in the scope of ",(0,d.mdx)("inlineCode",{parentName:"p"},'<images module="Magento_Catalog">')," element:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-xml"},'<media>\n    <images module="Magento_Catalog">\n    ...\n    </images>\n</media>\n')),(0,d.mdx)("p",null,"Image properties are configured for each image type defined by the ",(0,d.mdx)("inlineCode",{parentName:"p"},"id")," and ",(0,d.mdx)("inlineCode",{parentName:"p"},"type")," attributes of the ",(0,d.mdx)("inlineCode",{parentName:"p"},"<image>")," element:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-xml"},'<images module="Magento_Catalog">\n   <image id="unique_image_id" type="image_type">\n   ...\n   </image>\n</images>\n')),(0,d.mdx)("p",null,"The following table describes the attributes in detail:"),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,d.mdx)("th",{parentName:"tr",align:null},"Type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"id")),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"Image identifier. Unique in the scope of theme.",(0,d.mdx)("br",null),"Can have any value, but in out-of-the-box themes, the ",(0,d.mdx)("inlineCode",{parentName:"td"},"id")," is meaningful and describes the location of an image.",(0,d.mdx)("br",null),"For example, the ",(0,d.mdx)("inlineCode",{parentName:"td"},"id")," value for images of ",(0,d.mdx)("a",{parentName:"td",href:"https://glossary.magento.com/cross-sell"},"cross-sell")," products displayed in a shopping cart is ",(0,d.mdx)("inlineCode",{parentName:"td"},"cart_cross_sell_products"),".",(0,d.mdx)("br",null),(0,d.mdx)("inlineCode",{parentName:"td"},"id")," is used in ",(0,d.mdx)("inlineCode",{parentName:"td"},".phtml")," templates for defining the type and properties of images displayed in each particular location on a particular page.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"type")),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"The type of the images defined by the specified ",(0,d.mdx)("inlineCode",{parentName:"td"},"id"),". Allowed values:",(0,d.mdx)("br",null),(0,d.mdx)("inlineCode",{parentName:"td"},"image")," - corresponds to the Base Image role in the Admin",(0,d.mdx)("br",null),(0,d.mdx)("inlineCode",{parentName:"td"},"small_image")," - corresponds to the Small Image role in the Admin",(0,d.mdx)("br",null),(0,d.mdx)("inlineCode",{parentName:"td"},"swatch_image")," - corresponds to the Swatch Image role in the Admin",(0,d.mdx)("br",null),(0,d.mdx)("inlineCode",{parentName:"td"},"swatch_thumb")," - corresponds to the Swatch Image role in the ",(0,d.mdx)("a",{parentName:"td",href:"https://glossary.magento.com/magento-admin"},"Admin"),".",(0,d.mdx)("br",null),(0,d.mdx)("inlineCode",{parentName:"td"},"thumbnail")," - corresponds to the Thumbnail Image role in the Admin")))),(0,d.mdx)("p",null,"The following picture illustrates how image roles for product images are specified in the Admin:\n",(0,d.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,d.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"49.0625%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,d.mdx)("picture",{parentName:"span"},"\n          ",(0,d.mdx)("source",{parentName:"picture",srcSet:["/commerce-frontend-core/static/b5554902fc582e3e3ceca05ed6a0bed8/cb523/fdg_theme_bck.webp 320w","/commerce-frontend-core/static/b5554902fc582e3e3ceca05ed6a0bed8/797b9/fdg_theme_bck.webp 640w","/commerce-frontend-core/static/b5554902fc582e3e3ceca05ed6a0bed8/4b075/fdg_theme_bck.webp 1280w","/commerce-frontend-core/static/b5554902fc582e3e3ceca05ed6a0bed8/27c9c/fdg_theme_bck.webp 1447w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,d.mdx)("source",{parentName:"picture",srcSet:["/commerce-frontend-core/static/b5554902fc582e3e3ceca05ed6a0bed8/72799/fdg_theme_bck.png 320w","/commerce-frontend-core/static/b5554902fc582e3e3ceca05ed6a0bed8/6af66/fdg_theme_bck.png 640w","/commerce-frontend-core/static/b5554902fc582e3e3ceca05ed6a0bed8/21b4d/fdg_theme_bck.png 1280w","/commerce-frontend-core/static/b5554902fc582e3e3ceca05ed6a0bed8/6c99d/fdg_theme_bck.png 1447w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,d.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-frontend-core/static/b5554902fc582e3e3ceca05ed6a0bed8/21b4d/fdg_theme_bck.png",alt:"Setting image role in Admin",title:"Setting image role in Admin",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,d.mdx)("p",null,"Image properties are defined by the corresponding elements, for example:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-xml"},'<images module="Magento_Catalog">\n    <image id="unique_image_id" type="image">\n        <width>100</width> \x3c!-- Image width in px --\x3e\n        <height>100</height> \x3c!-- Image height in px --\x3e\n    </image>\n</images>\n')),(0,d.mdx)("p",null,"All image properties used in ",(0,d.mdx)("inlineCode",{parentName:"p"},"view.xml")," should be listed in the order shown here to prevent a ",(0,d.mdx)("strong",{parentName:"p"},'"This element is not expected."')," frontend error. The following table contains the list of all properties which can be configured:"),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Element"),(0,d.mdx)("th",{parentName:"tr",align:null},"Type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"),(0,d.mdx)("th",{parentName:"tr",align:null},"Required"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"width")),(0,d.mdx)("td",{parentName:"tr",align:null},"integer"),(0,d.mdx)("td",{parentName:"tr",align:null},"Image width in pixels."),(0,d.mdx)("td",{parentName:"tr",align:null},"Optional")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"height")),(0,d.mdx)("td",{parentName:"tr",align:null},"integer"),(0,d.mdx)("td",{parentName:"tr",align:null},"Image height in pixels."),(0,d.mdx)("td",{parentName:"tr",align:null},"Optional")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"constrain")),(0,d.mdx)("td",{parentName:"tr",align:null},"boolean"),(0,d.mdx)("td",{parentName:"tr",align:null},"If set to ",(0,d.mdx)("inlineCode",{parentName:"td"},"true"),", images that are smaller than required by the configuration, are not enlarged. Default value: ",(0,d.mdx)("inlineCode",{parentName:"td"},"true"),"."),(0,d.mdx)("td",{parentName:"tr",align:null},"Optional")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"aspect_ratio")),(0,d.mdx)("td",{parentName:"tr",align:null},"boolean"),(0,d.mdx)("td",{parentName:"tr",align:null},"If set to ",(0,d.mdx)("inlineCode",{parentName:"td"},"true"),", proportions of images are not changed even if required by the configuration. Default value: ",(0,d.mdx)("inlineCode",{parentName:"td"},"true"),"."),(0,d.mdx)("td",{parentName:"tr",align:null},"Optional")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"frame")),(0,d.mdx)("td",{parentName:"tr",align:null},"boolean"),(0,d.mdx)("td",{parentName:"tr",align:null},"If set to ",(0,d.mdx)("inlineCode",{parentName:"td"},"true"),", images are not cropped. Default value: ",(0,d.mdx)("inlineCode",{parentName:"td"},"true"),". Applied only if ",(0,d.mdx)("inlineCode",{parentName:"td"},"aspect_ratio")," is set to ",(0,d.mdx)("inlineCode",{parentName:"td"},"true"),"."),(0,d.mdx)("td",{parentName:"tr",align:null},"Optional")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"transparency")),(0,d.mdx)("td",{parentName:"tr",align:null},"boolean"),(0,d.mdx)("td",{parentName:"tr",align:null},"If set to ",(0,d.mdx)("inlineCode",{parentName:"td"},"true"),", the transparent background of images is saved. If is set to ",(0,d.mdx)("inlineCode",{parentName:"td"},"false"),", images have the white background (by default). You can set the color for the background using the ",(0,d.mdx)("inlineCode",{parentName:"td"},"background")," parameter. Default value: ",(0,d.mdx)("inlineCode",{parentName:"td"},"true"),"."),(0,d.mdx)("td",{parentName:"tr",align:null},"Optional")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"background")),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"The color for the images background. Not applied to images with transparency, if ",(0,d.mdx)("inlineCode",{parentName:"td"},"transparency")," is set to ",(0,d.mdx)("inlineCode",{parentName:"td"},"true"),'. Format: "',"[, ,]",'", e.g.: "',"[255, 255, 255]",'".'),(0,d.mdx)("td",{parentName:"tr",align:null},"Optional")))),(0,d.mdx)("h3",{id:"resize-catalog-images"},"Resize catalog images"),(0,d.mdx)("p",null,"Generally, product images are cached while saving the product. However, the ",(0,d.mdx)("inlineCode",{parentName:"p"},"magento catalog:images:resize")," command enables you to resize all images for display on your storefront. Situations where this could be necessary might be:"),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},"After you import products, which might have images of various sizes"),(0,d.mdx)("li",{parentName:"ul"},"If images were resized or deleted manually from ",(0,d.mdx)("a",{parentName:"li",href:"https://glossary.magento.com/cache"},"cache"))),(0,d.mdx)("p",null,"Each image assigned to a product must be resized in accordance with image ",(0,d.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/metadata"},"metadata")," defined in a module's ",(0,d.mdx)("a",{parentName:"p",href:"create-storefront.md#configure-images"},(0,d.mdx)("inlineCode",{parentName:"a"},"view.xml"))," configuration file. After resizing an image, its resized copy is stored in the cache (",(0,d.mdx)("inlineCode",{parentName:"p"},"/pub/media/catalog/product/cache")," directory). The application serves storefront images from cache."),(0,d.mdx)("p",null,"Command usage:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-bash"},"bin/magento catalog:images:resize\n")),(0,d.mdx)("p",null,"This command supports synchronous (default) and asynchronous modes.  Asynchronous means that images will not be processed immediately on command execution. Using the queue functionality, these images will be scheduled for resizing and then processed in the background. To enable asynchronous mode, use the ",(0,d.mdx)("inlineCode",{parentName:"p"},"-a")," or ",(0,d.mdx)("inlineCode",{parentName:"p"},"--async")," option."),(0,d.mdx)("p",null,"The message ",(0,d.mdx)("inlineCode",{parentName:"p"},"Product images resized successfully")," displays after the command has finished."),(0,d.mdx)("p",null,"To speed up the job while in asynchronous mode, you may manually run several instances of a consumer with the command in each instance:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-bash"},"bin/magento queue:consumer:start media.storage.catalog.image.resize\n")),(0,d.mdx)("h2",{id:"configure-variables"},"Configure variables"),(0,d.mdx)("p",null,"The variable properties ",(0,d.mdx)("inlineCode",{parentName:"p"},"vars")," are configured for each module individually, defined by ",(0,d.mdx)("inlineCode",{parentName:"p"},"module")," name."),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-xml"},'<vars module="Magento_Catalog">\n    <var name="breakpoints">\n        <var name="mobile">\n            <var name="conditions">\n                <var name="max-width">767px</var>\n            </var>\n            ...\n        </var>\n    </var>\n    ...\n</vars>\n')),(0,d.mdx)("p",null,"Any block that extends ",(0,d.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/View/Element/AbstractBlock.php"},(0,d.mdx)("inlineCode",{parentName:"a"},"AbstractBlock")),", can fetch variable values with the ",(0,d.mdx)("inlineCode",{parentName:"p"},"getVar")," method:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-php"},"$block->getVar($name, $module = null)\n")),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Parameter"),(0,d.mdx)("th",{parentName:"tr",align:null},"Required"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"name")),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"Yes")),(0,d.mdx)("td",{parentName:"tr",align:null},"The first level variable name")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"module")),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"No")),(0,d.mdx)("td",{parentName:"tr",align:null},"The module name where the variable is added. If not passed, it will be determined automatically based on the current module.")))),(0,d.mdx)("p",null,"Check the following example on getting the breakpoints variable by the ",(0,d.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/app/code/Magento/Catalog/Block/Product/View/Gallery.php"},(0,d.mdx)("inlineCode",{parentName:"a"},"Gallery"))," block:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-php"},"/**\n * Return breakpoints options\n *\n * @return string\n */\npublic function getBreakpoints()\n{\n    return $this->jsonEncoder->encode($this->getVar('breakpoints'));\n}\n")),(0,d.mdx)(p,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,d.mdx)("p",null,"Variables may be used within the scope of modules than the defined one."))}g.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guide-themes-configure-md-4ff4d615c21519448131.js.map
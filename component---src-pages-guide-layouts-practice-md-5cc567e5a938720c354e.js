"use strict";(self.webpackChunkcommerce_frontend_core=self.webpackChunkcommerce_frontend_core||[]).push([[1155],{36044:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return s},default:function(){return c}});var a=t(87462),o=t(63366),i=(t(15007),t(64983)),r=t(91515),l=["components"],s={},m={_frontmatter:s},d=r.Z;function c(e){var n=e.components,t=(0,o.Z)(e,l);return(0,i.mdx)(d,(0,a.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"practice-customizing-layouts"},"Practice customizing layouts"),(0,i.mdx)("p",null,"This article features a step-by-step illustration of how a real-life layout customization task is performed. Namely, it illustrates how to change the layout of customer account links in a store page header."),(0,i.mdx)("h2",{id:"move-customer-account-links"},"Move customer account links"),(0,i.mdx)("p",null,"In their Orange theme, ExampleCorp wants to transform the header links block to a drop-down, the way it is done in the Luma theme:"),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"610px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"24.062500000000004%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/commerce-frontend-core/static/dba70d9d9bafe6f7f71c31fb5366bc67/5530d/layout_transform21.webp 320w","/commerce-frontend-core/static/dba70d9d9bafe6f7f71c31fb5366bc67/2e913/layout_transform21.webp 610w"],sizes:"(max-width: 610px) 100vw, 610px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/commerce-frontend-core/static/dba70d9d9bafe6f7f71c31fb5366bc67/dd4a7/layout_transform21.png 320w","/commerce-frontend-core/static/dba70d9d9bafe6f7f71c31fb5366bc67/5d5ad/layout_transform21.png 610w"],sizes:"(max-width: 610px) 100vw, 610px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-frontend-core/static/dba70d9d9bafe6f7f71c31fb5366bc67/5d5ad/layout_transform21.png",alt:"layout transform",title:"layout transform",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("p",null,"To do this, they need to wrap the list of header links with a container and add a greeting with a drop-down arrow before the list."),(0,i.mdx)("p",null,"The Orange theme ",(0,i.mdx)("a",{parentName:"p",href:"../themes/inheritance.md"},"inherits")," from Blank, so by default the rendered header links look like following:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-html"},'<div class="panel header">\n    ...\n    <ul class="header links">\n        <li class="item link compare" data-bind="scope: \'compareProducts\'" data-role="compare-products-link">...</li>\n        <li class="greet welcome" data-bind="scope: \'customer\'">...</li>\n        <li>...</li>\n        <li class="link wishlist" data-bind="scope: \'wishlist\'">...</li>\n        <li class="authorization-link" data-label="or">...</li>\n    </ul>\n    ...\n</div>\n')),(0,i.mdx)("p",null,"The markup required for the drop-down is the following:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-html"},'<div class="panel header">\n    ...\n    <ul class="header links">\n        <li class="greet welcome" data-bind="scope: \'customer\'">...</li>\n        <li class="customer-welcome">\n            <span class="customer-name"\n                  role="link"\n                  tabindex="0"\n                  data-mage-init=\'{"dropdown":{}}\'\n                  data-toggle="dropdown"\n                  data-trigger-keypress-button="true"\n                  data-bind="scope: \'customer\'">\n                <span data-bind="text: customer().fullname"></span>\n                <button type="button"\n                        class="action switch"\n                        tabindex="-1"\n                        data-action="customer-menu-toggle">\n                    <span>Change</span>\n                </button>\n            </span>\n            <div class="customer-menu" data-target="dropdown" aria-hidden="true">\n                <ul class="header links">\n                    <li>...</li>\n                    <li class="link wishlist" data-bind="scope: \'wishlist\'">...</li>\n                    <li class="authorization-link" data-label="or">...</li>\n                </ul>\n            </div>\n        </li>\n        <li class="authorization-link" data-label="or">...</li>\n    </ul>\n    ....\n</div>\n')),(0,i.mdx)("h3",{id:"step-1-define-the-layout-blocks"},"Step 1: Define the layout blocks"),(0,i.mdx)("p",null,"ExampleCorp ",(0,i.mdx)("a",{parentName:"p",href:"../themes/apply-storefront.md"},"applies the Luma theme"),". Using the approach described in ",(0,i.mdx)("a",{parentName:"p",href:"../themes/debug.md"},"Locate templates, layouts, and styles")," they find out that the original block responsible for displaying the header links is defined in"),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},"<Magento_Theme_module_dir>/view/frontend/layout/default.xml"),":"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-xml"},'<container name="header.panel" label="Page Header Panel" htmlTag="div" htmlClass="panel header">\n    ...\n    <block class="Magento\\Framework\\View\\Element\\Html\\Links" name="top.links">\n        <arguments>\n            <argument name="css_class" xsi:type="string">header links</argument>\n        </arguments>\n    </block>\n</container>\n')),(0,i.mdx)("p",null,"(See ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/app/code/Magento/Theme/view/frontend/layout/default.xml#L43-L47"},"app/code/Magento/Theme/view/frontend/layout/default.xml")," on GitHub)."),(0,i.mdx)("p",null,"Other modules use this block to add their specific links to the header using the ",(0,i.mdx)("a",{parentName:"p",href:"xml-instructions.md#referenceblock-and-referencecontainer"},"referenceBlock")," instruction. For example, see how links are added in the Customer module: ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/app/code/Magento/Customer/view/frontend/layout/default.xml#L10-L23"},"app/code/Magento/Customer/view/frontend/layout/default.xml#L10-L23")),(0,i.mdx)("p",null,"The Luma theme ",(0,i.mdx)("a",{parentName:"p",href:"xml-instructions.md#move"},"moves")," the ",(0,i.mdx)("inlineCode",{parentName:"p"},"top.links")," block to the new ",(0,i.mdx)("inlineCode",{parentName:"p"},"customer")," block in the extending layout file."),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},"<Magento_luma_theme_dir>/Magento_Customer/layout/default.xml")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-xml"},'<referenceBlock name="header.links">\n    <block class="Magento\\Customer\\Block\\Account\\Customer" name="customer" template="Magento_Customer::account/customer.phtml" before="-"/>\n    ...\n</referenceBlock>\n...\n<move element="top.links" destination="customer"/>\n...\n')),(0,i.mdx)("p",null,"The links that should be in header, but outside the drop-down menu are added in the new ",(0,i.mdx)("inlineCode",{parentName:"p"},"header.links")," block (",(0,i.mdx)("inlineCode",{parentName:"p"},"<Magento_luma_theme_dir>/Magento_Theme/layout/default.xml"),"):"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-xml"},'<referenceContainer name="header.panel">\n    <block class="Magento\\Framework\\View\\Element\\Html\\Links" name="header.links">\n        <arguments>\n            <argument name="css_class" xsi:type="string">header links</argument>\n        </arguments>\n    </block>\n</referenceContainer>\n')),(0,i.mdx)("h3",{id:"step-2-define-the-templates"},"Step 2: Define the templates"),(0,i.mdx)("p",null,"Similar to the way they defined the layout on the previous step, ExampleCorp\ndefines the template which is used as the drop-down container : ",(0,i.mdx)("inlineCode",{parentName:"p"},"<Magento_Customer_module_dir>/view/frontend/templates/account/customer.phtml"),"."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-php"},'<?php if($block->customerLoggedIn()): ?>\n    <li class="customer-welcome">\n        <span class="customer-name"\n              role="link"\n              tabindex="0"\n              data-mage-init=\'{"dropdown":{}}\'\n              data-toggle="dropdown"\n              data-trigger-keypress-button="true"\n              data-bind="scope: \'customer\'">\n            <span data-bind="text: customer().fullname"></span>\n            <button type="button"\n                    class="action switch"\n                    tabindex="-1"\n                    data-action="customer-menu-toggle">\n                <span><?php /* @escapeNotVerified */ echo __(\'Change\')?></span>\n            </button>\n        </span>\n        <script type="text/x-magento-init">\n        {\n            "*": {\n                "Magento_Ui/js/core/app": {\n                    "components": {\n                        "customer": {\n                            "component": "Magento_Customer/js/view/customer"\n                        }\n                    }\n                }\n            }\n        }\n            <\/script>\n            <?php if($block->getChildHtml()):?>\n            <div class="customer-menu" data-target="dropdown">\n                <?php echo $block->getChildHtml();?>\n            </div>\n            <?php endif; ?>\n        </li>\n    <?php endif; ?>\n')),(0,i.mdx)("p",null,"See ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/app/code/Magento/Customer/view/frontend/templates/account/customer.phtml"},"app/code/Magento/Customer/view/frontend/templates/account/customer.phtml"),"."),(0,i.mdx)("h3",{id:"step-3-extend-the-base-layout-to-add-a-block"},"Step 3: Extend the base layout to add a block"),(0,i.mdx)("p",null,"ExampleCorp needs to create a new block, say, ",(0,i.mdx)("inlineCode",{parentName:"p"},"header.links"),", in the ",(0,i.mdx)("inlineCode",{parentName:"p"},"header.panel")," container, to move the links there. As the links can be added to this list by different modules, it is better to add this block to the ",(0,i.mdx)("inlineCode",{parentName:"p"},"default.xml")," page configuration of the ",(0,i.mdx)("inlineCode",{parentName:"p"},"Magento_Theme")," module."),(0,i.mdx)("p",null,"So the following ",(0,i.mdx)("a",{parentName:"p",href:"extend.md"},"extending")," layout is added in the Orange theme:"),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},"app/design/frontend/ExampleCorp/orange/Magento_Theme/layout/default.xml")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0"?>\n<page xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:View/Layout/etc/page_configuration.xsd">\n    <body>\n        <referenceContainer name="header.panel">\n            <block class="Magento\\Framework\\View\\Element\\Html\\Links" name="header.links">\n                <arguments>\n                    <argument name="css_class" xsi:type="string">header links</argument>\n                </arguments>\n            </block>\n        </referenceContainer>\n    </body>\n</page>\n')),(0,i.mdx)("h3",{id:"step-4-move-links"},"Step 4: Move links"),(0,i.mdx)("p",null,"To move the links to the ",(0,i.mdx)("inlineCode",{parentName:"p"},"header.links")," block, ExampleCorp adds an extending layout:"),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},"app/design/frontend/ExampleCorp/orange/Magento_Customer/layout/default.xml")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0"?>\n<page xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:View/Layout/etc/page_configuration.xsd">\n    <body>\n        <referenceBlock name="header.links">\n            <block class="Magento\\Customer\\Block\\Account\\Customer" name="customer" template="Magento_Customer::account/customer.phtml" before="-"/>\n            <block class="Magento\\Customer\\Block\\Account\\AuthorizationLink" name="authorization-link-login" template="Magento_Customer::account/link/authorization.phtml"/>\n        </referenceBlock>\n        <move element="register-link" destination="header.links"/>\n        <move element="top.links" destination="customer"/>\n        <move element="authorization-link" destination="top.links" after="-"/>\n    </body>\n</page>\n')),(0,i.mdx)("p",null,"Now the customer links look like following:"),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"784px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"34.06249999999999%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/commerce-frontend-core/static/e590cfe7106124bb27d3cda7d5335086/5530d/layout_screen221.webp 320w","/commerce-frontend-core/static/e590cfe7106124bb27d3cda7d5335086/0c8fb/layout_screen221.webp 640w","/commerce-frontend-core/static/e590cfe7106124bb27d3cda7d5335086/eeba7/layout_screen221.webp 784w"],sizes:"(max-width: 784px) 100vw, 784px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/commerce-frontend-core/static/e590cfe7106124bb27d3cda7d5335086/dd4a7/layout_screen221.png 320w","/commerce-frontend-core/static/e590cfe7106124bb27d3cda7d5335086/0f09e/layout_screen221.png 640w","/commerce-frontend-core/static/e590cfe7106124bb27d3cda7d5335086/c852c/layout_screen221.png 784w"],sizes:"(max-width: 784px) 100vw, 784px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-frontend-core/static/e590cfe7106124bb27d3cda7d5335086/c852c/layout_screen221.png",alt:"layout screen1",title:"layout screen1",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("p",null,"Clicking the ",(0,i.mdx)("strong",{parentName:"p"},"Change")," button toggles the ",(0,i.mdx)("inlineCode",{parentName:"p"},"active")," CSS class:"),(0,i.mdx)("p",null,'To add quick basic styling and visual behavior to the "dropdown" menu, ExampleCorp added ',(0,i.mdx)("a",{parentName:"p",href:"../css/quickstart/customize-styles.md"},"_extend.less")," to their theme with the following customizations:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Redundant elements are hidden with CSS."),(0,i.mdx)("li",{parentName:"ul"},"The ",(0,i.mdx)("inlineCode",{parentName:"li"},".lib-dropdown()")," mixin from ",(0,i.mdx)("a",{parentName:"li",href:"../css/ui-library.md"},"UI library")," was applied to the corresponding element.")),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},"app/design/frontend/ExampleCorp/orange/web/css/source/_extend.less")),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-css"},"//\n//  Common\n//  _____________________________________________\n\n& when (@media-common = true) {\n    .header.panel .header.links {\n        .customer-welcome + .authorization-link {\n            display: none;\n        }\n    }\n}\n\n//\n//  Mobile\n//  _____________________________________________\n\n.media-width(@extremum, @break) when (@extremum = 'max') and (@break = @screen__m) {\n    .customer-name,\n    .customer-welcome + .authorization-link {\n        display: none;\n    }\n}\n\n//\n//  Desktop\n//  _____________________________________________\n\n.media-width(@extremum, @break) when (@extremum = 'min') and (@break = @screen__m) {\n    .customer-welcome {\n        .lib-dropdown(\n            @_toggle-selector: ~'.action.switch',\n            @_options-selector: ~'.customer-menu .header.links',\n            @_dropdown-actions-padding: 0,\n            @_icon-font-text-hide: true,\n            @_icon-font-size: 22px,\n            @_icon-font-line-height: 22px,\n            @_dropdown-list-min-width: 160px,\n            @_dropdown-list-item-hover: transparent,\n            @_dropdown-list-pointer-position: right,\n            @_dropdown-list-position-right: 0\n        );\n\n         li {\n            a {\n                .lib-link(\n                @_link-color: #333,\n                @_link-text-decoration: none,\n                @_link-color-visited: #333,\n                @_link-text-decoration-visited: none,\n                @_link-color-hover: #333,\n                @_link-text-decoration-hover: none,\n                @_link-color-active: #333,\n                @_link-text-decoration-active: none\n                );\n                display: block;\n                line-height: 1.4;\n                padding: 8px;\n            }\n        }\n    }\n}\n")),(0,i.mdx)("p",null,"As a result, the customer links look like following:"),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"784px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"18.4375%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/commerce-frontend-core/static/53d3d4c78faf34c4e7705b99f14f0d47/5530d/layout_screen321.webp 320w","/commerce-frontend-core/static/53d3d4c78faf34c4e7705b99f14f0d47/0c8fb/layout_screen321.webp 640w","/commerce-frontend-core/static/53d3d4c78faf34c4e7705b99f14f0d47/eeba7/layout_screen321.webp 784w"],sizes:"(max-width: 784px) 100vw, 784px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/commerce-frontend-core/static/53d3d4c78faf34c4e7705b99f14f0d47/dd4a7/layout_screen321.png 320w","/commerce-frontend-core/static/53d3d4c78faf34c4e7705b99f14f0d47/0f09e/layout_screen321.png 640w","/commerce-frontend-core/static/53d3d4c78faf34c4e7705b99f14f0d47/c852c/layout_screen321.png 784w"],sizes:"(max-width: 784px) 100vw, 784px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-frontend-core/static/53d3d4c78faf34c4e7705b99f14f0d47/c852c/layout_screen321.png",alt:"layout screen2",title:"layout screen2",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guide-layouts-practice-md-5cc567e5a938720c354e.js.map
"use strict";(self.webpackChunkcommerce_frontend_core=self.webpackChunkcommerce_frontend_core||[]).push([[1305],{71338:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return d},default:function(){return l}});var a=n(87462),i=n(63366),o=(n(15007),n(64983)),r=n(91515),m=["components"],d={},s={_frontmatter:d},p=r.Z;function l(e){var t=e.components,n=(0,i.Z)(e,m);return(0,o.mdx)(p,(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"debug-javascript-components"},"Debug JavaScript components"),(0,o.mdx)("p",null,"This topic discusses how to define which ",(0,o.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/javascript"},"JavaScript")," components and widgets are used on a particular store page."),(0,o.mdx)("h2",{id:"locate-components"},"Locate components"),(0,o.mdx)("p",null,"To locate scripts used for a certain element:"),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},"Open the store page in a browser, and locate the element's ",(0,o.mdx)("inlineCode",{parentName:"p"},"class")," or ",(0,o.mdx)("inlineCode",{parentName:"p"},"id")," using browser debugging tools, such as Firebug (Firefox) or Inspect Element (Chrome).")),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},"Select to view the page source.")),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},"Find the corresponding element in the page source and see if there are ",(0,o.mdx)("inlineCode",{parentName:"p"},"data-mage-init")," or ",(0,o.mdx)("inlineCode",{parentName:"p"},'<script type="text/x-magento-init">')," calls on this element, its children or parents. The calls contain the names of the scripts, as described in ",(0,o.mdx)("a",{parentName:"p",href:"init.md"},"JavaScript initialization"),".")),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},"To find the source file of the used script:"),(0,o.mdx)("ol",{parentName:"li"},(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},"In the ",(0,o.mdx)("inlineCode",{parentName:"p"},"<head></head>")," section of the page source, click link to ",(0,o.mdx)("inlineCode",{parentName:"p"},"requirejs-config.js")," file. The file contains the RequireJS configuration, collected from all modules of the current ",(0,o.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/theme"},"theme"),"."),(0,o.mdx)("p",{parentName:"li"},"Alternatively, you can open the ",(0,o.mdx)("inlineCode",{parentName:"p"},"requirejs-config.js")," file from the file system: ",(0,o.mdx)("inlineCode",{parentName:"p"},"pub/static/frontend/<Vendor>/<theme>/<locale>/requirejs-config.js"))),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},"In the ",(0,o.mdx)("inlineCode",{parentName:"p"},"var config = {...}")," section of ",(0,o.mdx)("inlineCode",{parentName:"p"},"requirejs-config.js"),", find the required script name, and view the path to its source file. This path is relative to certain directories, depending on whether it contains ",(0,o.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/module"},"module")," reference:"),(0,o.mdx)("ul",{parentName:"li"},(0,o.mdx)("li",{parentName:"ul"},"If the module context is not specified, the path is relative to ",(0,o.mdx)("inlineCode",{parentName:"li"},"<theme_dir>/web")," (current theme). If the file is not found there, according to the assets fallback, it is searched for in the parent theme ",(0,o.mdx)("inlineCode",{parentName:"li"},"web")," directory, and then the ",(0,o.mdx)("inlineCode",{parentName:"li"},"lib/web"),"(library) directory. For example, ",(0,o.mdx)("inlineCode",{parentName:"li"},"knockoutjs/knockout")," ",(0,o.mdx)("a",{parentName:"li",href:"https://github.com/magento/magento2/blob/2.4/app/code/Magento/Theme/view/base/requirejs-config.js#L10"},"script name")," resolves to ",(0,o.mdx)("inlineCode",{parentName:"li"},"lib/web/knockoutjs/knockout.js"),"."),(0,o.mdx)("li",{parentName:"ul"},"If the module context is specified, the path is relative to ",(0,o.mdx)("inlineCode",{parentName:"li"},"<theme_dir>/<Namespace>_<Module>/web")," (current theme module). If the file is not found there, according to the assets fallback, it is searched for in the same location in the parent theme files, and then in the ",(0,o.mdx)("inlineCode",{parentName:"li"},"<module_dir>")," (module) directory. For example, ",(0,o.mdx)("inlineCode",{parentName:"li"},"Magento_Catalog/js/list")," ",(0,o.mdx)("a",{parentName:"li",href:"https://github.com/magento/magento2/blob/2.4/app/code/Magento/Catalog/view/frontend/requirejs-config.js#L9"},"script name")," resolves to ",(0,o.mdx)("inlineCode",{parentName:"li"},"Magento_Catalog/view/frontend/web/js/list.js"),".")))))),(0,o.mdx)("h3",{id:"example"},"Example"),(0,o.mdx)("p",null,"As we discussed in the preceding section, you use browser debugging tools to define which JavaScript component or ",(0,o.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/widget"},"widget")," is used for an element. An example follows. To find what JS components are used for displaying the main navigation menu in the Luma theme:"),(0,o.mdx)("p",null,"Using the Inspect Element feature of the browser, define that the menu section ",(0,o.mdx)("inlineCode",{parentName:"p"},"id")," is ",(0,o.mdx)("inlineCode",{parentName:"p"},"store.menu"),":"),(0,o.mdx)("p",null,(0,o.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1226px"}},"\n      ",(0,o.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"62.18749999999999%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,o.mdx)("picture",{parentName:"span"},"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/commerce-frontend-core/static/7c7dab6d3903f1b672c189b4dc317453/5530d/fdg_js_debug1.webp 320w","/commerce-frontend-core/static/7c7dab6d3903f1b672c189b4dc317453/0c8fb/fdg_js_debug1.webp 640w","/commerce-frontend-core/static/7c7dab6d3903f1b672c189b4dc317453/2e958/fdg_js_debug1.webp 1226w"],sizes:"(max-width: 1226px) 100vw, 1226px",type:"image/webp"}),"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/commerce-frontend-core/static/7c7dab6d3903f1b672c189b4dc317453/dd4a7/fdg_js_debug1.png 320w","/commerce-frontend-core/static/7c7dab6d3903f1b672c189b4dc317453/0f09e/fdg_js_debug1.png 640w","/commerce-frontend-core/static/7c7dab6d3903f1b672c189b4dc317453/98ef1/fdg_js_debug1.png 1226w"],sizes:"(max-width: 1226px) 100vw, 1226px",type:"image/png"}),"\n          ",(0,o.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-frontend-core/static/7c7dab6d3903f1b672c189b4dc317453/98ef1/fdg_js_debug1.png",alt:"Using the Inspect Element define the id",title:"Using the Inspect Element define the id",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,o.mdx)("p",null,"Search the page source for ",(0,o.mdx)("inlineCode",{parentName:"p"},"store.menu")," (illustration follows):"),(0,o.mdx)("p",null,(0,o.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"909px"}},"\n      ",(0,o.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"8.4375%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,o.mdx)("picture",{parentName:"span"},"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/commerce-frontend-core/static/ddf0783767497d38ae4d6f571b449304/5530d/fdg_js_debug2.webp 320w","/commerce-frontend-core/static/ddf0783767497d38ae4d6f571b449304/0c8fb/fdg_js_debug2.webp 640w","/commerce-frontend-core/static/ddf0783767497d38ae4d6f571b449304/a0a21/fdg_js_debug2.webp 909w"],sizes:"(max-width: 909px) 100vw, 909px",type:"image/webp"}),"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/commerce-frontend-core/static/ddf0783767497d38ae4d6f571b449304/dd4a7/fdg_js_debug2.png 320w","/commerce-frontend-core/static/ddf0783767497d38ae4d6f571b449304/0f09e/fdg_js_debug2.png 640w","/commerce-frontend-core/static/ddf0783767497d38ae4d6f571b449304/2f7b1/fdg_js_debug2.png 909w"],sizes:"(max-width: 909px) 100vw, 909px",type:"image/png"}),"\n          ",(0,o.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-frontend-core/static/ddf0783767497d38ae4d6f571b449304/2f7b1/fdg_js_debug2.png",alt:"Search the page source for the store.menu string",title:"Search the page source for the store.menu string",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,o.mdx)("p",null,"We can see that there\\'s a ",(0,o.mdx)("inlineCode",{parentName:"p"},"data-mage-init")," attribute in the scope of the ",(0,o.mdx)("inlineCode",{parentName:"p"},'<div id= "store.menu"></div>')),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-js"},'data-mage-init=\'{"menu":{"responsive":true, "expanded":true, "position":{"my":"left top","at":"left bottom"}}}\n')),(0,o.mdx)("p",null,"According to the JS components initialization notation, this means that this code calls ",(0,o.mdx)("inlineCode",{parentName:"p"},"menu.js"),"."),(0,o.mdx)("p",null,"To find the source file of ",(0,o.mdx)("inlineCode",{parentName:"p"},"menu.js"),", open ",(0,o.mdx)("inlineCode",{parentName:"p"},"requirejs-config.js")," by clicking the link to it in the section of the page source. The path to ",(0,o.mdx)("inlineCode",{parentName:"p"},"menu.js")," is specified there as follows:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-js"},'"menu": "mage/menu",\n')),(0,o.mdx)("p",null,"This means we should check for ",(0,o.mdx)("inlineCode",{parentName:"p"},"mage/menu.js")," the following locations, in the following priority order (according to the ",(0,o.mdx)("a",{parentName:"p",href:"../guide/themes/inheritance.md"},"assets fallback rules"),"):"),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("inlineCode",{parentName:"li"},"<Magento_Luma_theme_dir>/web/js")," (current theme JS files)"),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("inlineCode",{parentName:"li"},"<Magento_Blank_theme_dir>/web/js")," (parent theme JS files)"),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("inlineCode",{parentName:"li"},"lib/web")," (library files)")),(0,o.mdx)("p",null,"There is no ",(0,o.mdx)("inlineCode",{parentName:"p"},"mage/menu.js")," in the current theme or parent theme JS files, so the source file for menu component used for the main navigation menu is ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/lib/web/mage/menu.js"},(0,o.mdx)("inlineCode",{parentName:"a"},"lib/web/mage/menu.js"))))}l.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-javascript-debug-md-55fe415f8731325a7c17.js.map
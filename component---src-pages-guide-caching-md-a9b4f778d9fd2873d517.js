"use strict";(self.webpackChunkcommerce_frontend_core=self.webpackChunkcommerce_frontend_core||[]).push([[7512],{45642:function(e,a,t){t.r(a),t.d(a,{_frontmatter:function(){return d},default:function(){return h}});var n,l=t(87462),o=t(63366),r=(t(15007),t(64983)),m=t(91515),i=["components"],d={},c=(n="InlineAlert",function(e){return console.warn("Component "+n+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.mdx)("div",e)}),s={_frontmatter:d},p=m.Z;function h(e){var a=e.components,t=(0,o.Z)(e,i);return(0,r.mdx)(p,(0,l.Z)({},s,t,{components:a,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"page-caching"},"Page caching"),(0,r.mdx)("p",null,"Caching is one of the most effective ways to improve website performance. Generally speaking, there are two methods of caching content:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Client-side (browser)"),(0,r.mdx)("li",{parentName:"ul"},"Server-side")),(0,r.mdx)("p",null,"Retrieving stored (",(0,r.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/cache"},"cached"),") content from a previous request for the same client instead of requesting files from your server every time someone visits your site is a more efficient use of network bandwidth."),(0,r.mdx)("p",null,"The Adobe Commerce and Magento Open Source page cache library contains a simple PHP reverse proxy that enables full page caching out of the box. A reverse proxy acts as an intermediary between visitors and your application and can reduce the load on your server."),(0,r.mdx)("p",null,"We recommend using ",(0,r.mdx)("a",{parentName:"p",href:"https://devdocs.magento.com/guides/v2.4/config-guide/varnish/config-varnish.html"},"Varnish"),", but you can use the default caching mechanism instead, which stores cache files in any of the following:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"File system (You don't need to do anything to use file-based caching.)"),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("a",{parentName:"li",href:"https://developer.adobe.com/commerce/php/development/cache/partial/database-caching/"},"Database")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("a",{parentName:"li",href:"https://devdocs.magento.com/guides/v2.4/config-guide/redis/redis-pg-cache.html"},"Redis"))),(0,r.mdx)("h2",{id:"cacheable-and-uncacheable-pages"},"Cacheable and uncacheable pages"),(0,r.mdx)("p",null,(0,r.mdx)("em",{parentName:"p"},"Cacheable")," and ",(0,r.mdx)("em",{parentName:"p"},"uncacheable")," are terms we use to indicate whether or not a page should be cached at all. (By default, all pages are cacheable except the checkout pages.) If any block in a ",(0,r.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/layout"},"layout")," is designated as uncacheable, the entire page is uncacheable."),(0,r.mdx)("p",null,"To create an uncacheable page, mark any block on that page as uncacheable in the layout using ",(0,r.mdx)("inlineCode",{parentName:"p"},'cacheable="false"'),"."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-xml"},'<block class="Magento\\Customer\\Block\\Form\\Edit" name="customer_edit" template="Magento_Customer::form/edit.phtml" cacheable="false">\n    <container name="form.additional.info" as="form_additional_info"/>\n</block>\n')),(0,r.mdx)("p",null,"Examples of uncacheable pages include the compare products, cart, ",(0,r.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/checkout"},"checkout")," pages, and so on."),(0,r.mdx)("p",null,(0,r.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/app/code/Magento/Paypal/view/frontend/layout/paypal_payflow_returnurl.xml"},"Example")),(0,r.mdx)(c,{variant:"warning",slots:"text",mdxType:"InlineAlert"}),(0,r.mdx)("p",null,"Do not configure content pages (i.e., catalog, product, and CMS pages) to be uncacheable. Doing so has an adverse affect on performance."),(0,r.mdx)("h2",{id:"public-and-private-content"},"Public and private content"),(0,r.mdx)("p",null,'Reverse proxies serve "public" or shared content to more than one user. However, most Adobe Commerce and Magento Open Source websites generate dynamic and personalized "private" content that should only be served to one user, which presents unique caching challenges. To address these challenges, the application can distinguish between two types of content:'),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("p",{parentName:"li"},(0,r.mdx)("strong",{parentName:"p"},(0,r.mdx)("a",{parentName:"strong",href:"https://developer.adobe.com/commerce/php/development/cache/page/public-content/"},"Public"))," - Public content is stored server side in your reverse proxy cache storage (e.g., file system, database, Redis, or Varnish) and is available to multiple customers. Examples of public content include header, footer, and category listing.")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("p",{parentName:"li"},(0,r.mdx)("strong",{parentName:"p"},(0,r.mdx)("a",{parentName:"strong",href:"https://developer.adobe.com/commerce/php/development/cache/page/private-content/"},"Private"))," - Private content is stored client side (e.g., browser) and is specific to an individual customer. Examples of private content include wishlist, shopping cart, customer name, and address. You should limit stored private content to a small portion of the page's total content."))),(0,r.mdx)(c,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,r.mdx)("p",null,"Only HTTP ",(0,r.mdx)("a",{parentName:"p",href:"https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.3"},"GET")," and ",(0,r.mdx)("a",{parentName:"p",href:"https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.4"},"HEAD")," requests are cacheable. For more information about caching, see ",(0,r.mdx)("a",{parentName:"p",href:"https://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html"},"RFC-2616 section 13"),"."),(0,r.mdx)("h2",{id:"cache-types"},"Cache types"),(0,r.mdx)("p",null,"The following cache types mostly have impact on frontend development process:"),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},'Cache type "friendly" name'),(0,r.mdx)("th",{parentName:"tr",align:null},"Cache type code name"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Layout"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"layout")),(0,r.mdx)("td",{parentName:"tr",align:null},"Compiled page layouts (that is, the layout components from all components). Clean or flush this cache type after modifying layout files.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Block HTML output"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"block_html")),(0,r.mdx)("td",{parentName:"tr",align:null},"HTML page fragments per block. Clean or flush this cache type after modifying the view layer.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Page cache"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"full_page")),(0,r.mdx)("td",{parentName:"tr",align:null},"Generated HTML pages. If necessary, the application cleans up this cache automatically, but third-party developers can put any data in any segment of the cache. Clean or flush this cache type after modifying code level that affects HTML output. Itâ€™s recommended to keep this cache enabled because caching HTML improves performance significantly.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},"Translations"),(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"translate")),(0,r.mdx)("td",{parentName:"tr",align:null},"Merged translations from all modules.")))),(0,r.mdx)(c,{variant:"help",slots:"text",mdxType:"InlineAlert"}),(0,r.mdx)("p",null,"The full list of cache types can be found in the ",(0,r.mdx)("a",{parentName:"p",href:"https://devdocs.magento.com/guides/v2.4/config-guide/cli/config-cli-subcommands-cache.html#config-cli-subcommands-cache-clean-over"},"Overview of cache types")," topic."),(0,r.mdx)("h2",{id:"clean-cache"},"Clean cache"),(0,r.mdx)("p",null,"To clean cache, run"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"bin/magento cache:clean <type> ... <type>\n")),(0,r.mdx)("p",null,"To view the status of the cache, run:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"bin/magento cache:status\n")),(0,r.mdx)("p",null,"For more details about working with cache, see ",(0,r.mdx)("a",{parentName:"p",href:"https://devdocs.magento.com/guides/v2.4/config-guide/cli/config-cli-subcommands-cache.html"},"Manage the cache")),(0,r.mdx)("h2",{id:"clean-static-files-cache"},"Clean static files cache"),(0,r.mdx)("p",null,"You can clean generated static view files in any of the following ways:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("p",{parentName:"li"},"In the ",(0,r.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/magento-admin"},"Admin"),". Go to ",(0,r.mdx)("strong",{parentName:"p"},"System")," > ",(0,r.mdx)("strong",{parentName:"p"},"Tools")," > ",(0,r.mdx)("strong",{parentName:"p"},"Cache Management")," and click ",(0,r.mdx)("strong",{parentName:"p"},"Flush ",(0,r.mdx)("a",{parentName:"strong",href:"https://glossary.magento.com/static-files"},"Static Files")," Cache"),"."),(0,r.mdx)("p",{parentName:"li"}," {:.bs-callout-info}\nThis option is only available in ",(0,r.mdx)("inlineCode",{parentName:"p"},"developer")," mode. Refer to the ",(0,r.mdx)("a",{parentName:"p",href:"https://devdocs.magento.com/guides/v2.4/config-guide/cli/config-cli-subcommands-static-view.html#config-cli-static-overview"},"static view files overview")," for more information. For more details about the application modes, see ",(0,r.mdx)("a",{parentName:"p",href:"https://devdocs.magento.com/guides/v2.4/config-guide/cli/config-cli-subcommands-mode.html"},"application modes"))),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("p",{parentName:"li"},"Manually by clearing the ",(0,r.mdx)("inlineCode",{parentName:"p"},"pub/static")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"var/view_preprocessed")," directories and subdirectories ",(0,r.mdx)("em",{parentName:"p"},"except")," for ",(0,r.mdx)("inlineCode",{parentName:"p"},"pub/static/.htaccess"),"."),(0,r.mdx)("p",{parentName:"li"},"To clear the ",(0,r.mdx)("inlineCode",{parentName:"p"},"pub/static")," directory of all files except ",(0,r.mdx)("inlineCode",{parentName:"p"},".htaccess")," (which is a hidden file), enter the following command:"),(0,r.mdx)("pre",{parentName:"li"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"rm -r pub/static/*/*\n")),(0,r.mdx)("p",{parentName:"li"},"To clear the ",(0,r.mdx)("inlineCode",{parentName:"p"},"var/view_preprocessed"),", enter the following command:"),(0,r.mdx)("pre",{parentName:"li"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"rm -r var/view_preprocessed/*\n"))),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("p",{parentName:"li"},"Several commands support an optional parameter ",(0,r.mdx)("inlineCode",{parentName:"p"},"--clear-static-content"),", which cleans generated static view files:"),(0,r.mdx)("ul",{parentName:"li"},(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("a",{parentName:"li",href:"https://devdocs.magento.com/guides/v2.4/install-gde/install/cli/install-cli-subcommands-enable.html"},(0,r.mdx)("inlineCode",{parentName:"a"},"magento module:enable")," and ",(0,r.mdx)("inlineCode",{parentName:"a"},"magento module:disable"))),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("a",{parentName:"li",href:"https://devdocs.magento.com/guides/v2.4/install-gde/install/cli/install-cli-theme-uninstall.html"},(0,r.mdx)("inlineCode",{parentName:"a"},"magento theme:uninstall"))),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("a",{parentName:"li",href:"https://devdocs.magento.com/guides/v2.4/install-gde/install/cli/install-cli-uninstall-mods.html"},(0,r.mdx)("inlineCode",{parentName:"a"},"magento module:uninstall")))))),(0,r.mdx)("h2",{id:"clean-static-files"},"Clean static files"),(0,r.mdx)("p",null,"Besides the cached files, in theme development process developers also deal with other saved files - static view files that are preprocessed and published to the ",(0,r.mdx)("inlineCode",{parentName:"p"},"var/view_preprocessed")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"pub/static")," directories correspondingly. In most cases when working on a custom theme, for example, if you are only working on styles, you do not need to clean cache, but need to clean the previously preprocessed and published static view files. To clean them, run  ",(0,r.mdx)("inlineCode",{parentName:"p"},"grunt clean <theme>")," or manually clear the ",(0,r.mdx)("inlineCode",{parentName:"p"},"pub/static")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"var/view_preprocessed")," directories."))}h.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guide-caching-md-a9b4f778d9fd2873d517.js.map
"use strict";(self.webpackChunkcommerce_frontend_core=self.webpackChunkcommerce_frontend_core||[]).push([[1183],{81318:function(e,n,a){a.r(n),a.d(n,{_frontmatter:function(){return d},default:function(){return u}});var t=a(87462),i=a(45987),r=(a(35776),a(3905)),o=a(91515);const l=["components"],d={},s={_frontmatter:d},m=o.Z;function u(e){let{components:n}=e,a=(0,i.Z)(e,l);return(0,r.mdx)(m,(0,t.Z)({},s,a,{components:n,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"custom-form-validation-rules"},"Custom form validation rules"),(0,r.mdx)("p",null,"Custom validation rules can be added by creating a Javascript mixin for the ",(0,r.mdx)("inlineCode",{parentName:"p"},"mage/validation")," module and calling the ",(0,r.mdx)("inlineCode",{parentName:"p"},"$.validator.addMethod")," function with the custom validation rule parameters as described below:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"$.validator.addMethod(\n  'rule-name',\n  function(value, element) {\n    // Return true or false after validation rule check\n  },\n  $.mage.__('Error message to display if validation fails')\n)\n")),(0,r.mdx)("p",null,"This code snippet adds a simple new validation rule to the mixin to validate if an input field has only five words."),(0,r.mdx)("p",null,(0,r.mdx)("inlineCode",{parentName:"p"},"Vendor/Module/view/frontend/requirejs-config.js")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"var config = {\n  config: {\n    mixins: {\n      'mage/validation': {\n        'Vendor_Module/js/validation-mixin': true\n      }\n    }\n  }\n}\n")),(0,r.mdx)("p",null,(0,r.mdx)("inlineCode",{parentName:"p"},"Vendor/Module/view/frontend/web/js/validation-mixin.js")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"define(['jquery'], function($) {\n  'use strict';\n\n  return function(targetWidget) {\n    $.validator.addMethod(\n      'validate-five-words',\n      function(value, element) {\n        return value.split(' ').length == 5;\n      },\n      $.mage.__('Please enter exactly five words')\n    )\n    return targetWidget;\n  }\n});\n")),(0,r.mdx)("h2",{id:"modify-an-existing-validation-message"},"Modify an existing validation message"),(0,r.mdx)("p",null,"It is possible to adjust the existing error message for form fields.\nThis is implemented in the core codebase in scope of the ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/app/code/Magento/CatalogSearch/view/frontend/templates/advanced/form.phtml"},(0,r.mdx)("inlineCode",{parentName:"a"},"Magento_CatalogSearch")," module"),"."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-html"},"<script>\nrequire([\n    \"jquery\",\n    \"mage/mage\",\n    \"mage/validation\"\n], function($){\n    $('#form-validate').mage('validation', {\n        errorPlacement: function (error, element) {\n            var parent = element.parent();\n            if (parent.hasClass('range')) {\n                parent.find(this.errorElement + '.' + this.errorClass).remove().end().append(error);\n            } else {\n                error.insertAfter(element);\n            }\n        },\n        messages: {\n            'price[to]': {'greater-than-equals-to': '<?= $block->escapeJs(__('Please enter a valid price range.')) ?>'},\n            'price[from]': {'less-than-equals-to': '<?= $block->escapeJs(__('Please enter a valid price range.')) ?>'}\n        }\n    });\n});\n<\/script>\n")),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"messages")," object is the one that does the job - they key is the input name and the value is a list of validation rules that should be modified for the specified input field.\nHere the rule name is the key and the validation message is the value."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-js"},"$('#form-to-validate').mage('validation', {\n    messages: {\n        'input-name': {\n            'validation-rule-1': 'Validation message 1',\n            'validation-rule-2': 'Validation message 2',\n        },\n    }\n});\n")),(0,r.mdx)("p",null,"This comes in handy when the error message needs to be specific but the rule does not change."))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guide-validations-custom-rules-md-08404657173e72c82697.js.map
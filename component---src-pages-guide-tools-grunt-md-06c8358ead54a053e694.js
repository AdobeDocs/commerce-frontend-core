"use strict";(self.webpackChunkcommerce_frontend_core=self.webpackChunkcommerce_frontend_core||[]).push([[6754],{63080:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return m},default:function(){return p}});var a=t(87462),o=t(63366),i=(t(15007),t(64983)),l=t(91515),r=["components"],m={},d={_frontmatter:m},s=l.Z;function p(e){var n=e.components,t=(0,o.Z)(e,r);return(0,i.mdx)(s,(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"grunt"},"Grunt"),(0,i.mdx)("p",null,"The topic describes how to install and configure ",(0,i.mdx)("a",{parentName:"p",href:"http://gruntjs.com/"},"Grunt JavaScript task runner"),"."),(0,i.mdx)("p",null,"You can use Grunt to automate any tasks you need, but out of the box the application comes with pre-configured grunt tasks for compiling LESS files."),(0,i.mdx)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.mdx)("p",null,"Make sure that you ",(0,i.mdx)("a",{parentName:"p",href:"https://devdocs.magento.com/guides/v2.4/config-guide/cli/config-cli-subcommands-mode.html"},"set")," your application to the developer or default ",(0,i.mdx)("a",{parentName:"p",href:"https://devdocs.magento.com/guides/v2.4/config-guide/bootstrap/magento-modes.html"},"mode"),"."),(0,i.mdx)("h2",{id:"install-and-configure-grunt"},"Install and configure Grunt"),(0,i.mdx)("p",null,"The application has built-in Grunt tasks configured, but there are still several steps you need to take to be able to use it:"),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Install ",(0,i.mdx)("a",{parentName:"p",href:"https://nodejs.org/en/download/package-manager/"},"node.js")," to any location on your machine.")),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Install Grunt CLI tool globally. To do this, run the following command in a command prompt:"),(0,i.mdx)("pre",{parentName:"li"},(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"npm install -g grunt-cli\n"))),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"From the ",(0,i.mdx)("inlineCode",{parentName:"p"},"<Magento_root>")," directory, copy and paste the contents of the following files:"),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"package.json.sample")," into ",(0,i.mdx)("inlineCode",{parentName:"li"},"package.json")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"Gruntfile.js.sample")," into ",(0,i.mdx)("inlineCode",{parentName:"li"},"Gruntfile.js")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"grunt-config.json.sample")," into ",(0,i.mdx)("inlineCode",{parentName:"li"},"grunt-config.json")))),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Install (or refresh) the ",(0,i.mdx)("inlineCode",{parentName:"p"},"node.js")," project dependency, including Grunt, for your instance. To do this, run the following commands in a command prompt:"),(0,i.mdx)("pre",{parentName:"li"},(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"cd your_Magento_instance_directory\n")),(0,i.mdx)("pre",{parentName:"li"},(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"npm install\n")),(0,i.mdx)("pre",{parentName:"li"},(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"npm update\n"))),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},'(Optional) If you want to use Grunt for "watching" changes automatically, without reloading pages in a browser each time, install the ',(0,i.mdx)("a",{parentName:"p",href:"http://livereload.com/extensions/"},"LiveReload extension")," in your browser."))),(0,i.mdx)("h2",{id:"configuration-file"},"Configuration file"),(0,i.mdx)("p",null,"Copy the contents of ",(0,i.mdx)("inlineCode",{parentName:"p"},"themes.js")," into ",(0,i.mdx)("inlineCode",{parentName:"p"},"local-themes.js")," in the ",(0,i.mdx)("inlineCode",{parentName:"p"},"dev/tools/grunt/configs/")," directory."),(0,i.mdx)("p",null,"If installed as described above, Grunt will use the default configuration files located in the ",(0,i.mdx)("inlineCode",{parentName:"p"},"dev/tools/grunt/configs/")," directory. You can define your theme in the ",(0,i.mdx)("inlineCode",{parentName:"p"},"local-themes.js")," file. The following shows an example of how you can define your theme."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-javascript"},"<theme>: {\n  area: '<area>',\n  name: '<Vendor>/<theme>,\n  locale: '<language>',\n  files: [\n    '<path_to_file1>', //path to root source file\n    '<path_to_file2>'\n  ],\ndsl: 'less'\n}\n")),(0,i.mdx)("p",null,"Where the following notation is used:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"<Vendor>"),": vendor name."),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"<theme>"),": your theme code, conventionally should correspond to the theme directory name."),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"<area>"),": area code, can be either ",(0,i.mdx)("inlineCode",{parentName:"li"},"frontend")," or ",(0,i.mdx)("inlineCode",{parentName:"li"},"adminhtml"),"."),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"<language>"),": specified in the ",(0,i.mdx)("inlineCode",{parentName:"li"},"code_subtag")," format, for example ",(0,i.mdx)("inlineCode",{parentName:"li"},"en_US"),". Only one locale can be specified here. To debug the theme with another locale, create one more theme declaration, having specified another value for ",(0,i.mdx)("inlineCode",{parentName:"li"},"language"),"."),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"<path_to_file>"),": path to the root source file, relative to the ",(0,i.mdx)("inlineCode",{parentName:"li"},"app/design/frontend/<Vendor>/<theme>/web")," directory. You need to specify all ",(0,i.mdx)("a",{parentName:"li",href:"../css/preprocess.md"},"root source files of the theme"),". If your theme ","[inherits]"," from a certain theme, and does not contain its own root source files, specify the root source files of the parent theme.")),(0,i.mdx)("p",null,"Once these are set correctly, run grunt to watch your changes."),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Run ",(0,i.mdx)("inlineCode",{parentName:"li"},"grunt exec:<theme>")," from the root directory to republish the symlinks."),(0,i.mdx)("li",{parentName:"ul"},"Run ",(0,i.mdx)("inlineCode",{parentName:"li"},"grunt watch:<theme>")," so that grunt will watch for file changes.")),(0,i.mdx)("h2",{id:"custom-grunt-configuration-files"},"Custom Grunt configuration files"),(0,i.mdx)("p",null,"There are several ways to declare a custom configuration file."),(0,i.mdx)("h3",{id:"declare-a-custom-configuration-file-option-1"},"Declare a custom configuration file (option 1)"),(0,i.mdx)("p",null,"To use a custom file for Grunt configuration:"),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Copy the default configuration file to the preferred location in the instance directory. Do not change the file name.")),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Open the ",(0,i.mdx)("inlineCode",{parentName:"p"},"grunt-config.json")," file in the installation and set configurations object as follows."),(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"key: file alias"),(0,i.mdx)("li",{parentName:"ul"},"value: path to your custom file")),(0,i.mdx)("p",{parentName:"li"},"Example:\nIf your custom configuration file ",(0,i.mdx)("inlineCode",{parentName:"p"},"local-themes.js")," is located in the ",(0,i.mdx)("inlineCode",{parentName:"p"},"<magento_root>/dev/tools/grunt/configs")," directory, the following is already set in your ",(0,i.mdx)("inlineCode",{parentName:"p"},"grunt-config.json"),":"),(0,i.mdx)("pre",{parentName:"li"},(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "themes": "dev/tools/grunt/configs/local-themes.js"\n}\n')))),(0,i.mdx)("p",null,"This path is also added to your .gitignore by default."),(0,i.mdx)("h3",{id:"declare-a-custom-configuration-file-option-2"},"Declare a custom configuration file (option 2)"),(0,i.mdx)("p",null,"You can also use the other way to declare a custom config file:"),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"In your Grunt related scripts, in the file router, set the alias and path to the custom configuration file. For example, to set the custom ",(0,i.mdx)("inlineCode",{parentName:"p"},"themes.loc.js")," configuration file, this would look like the following:"),(0,i.mdx)("pre",{parentName:"li"},(0,i.mdx)("code",{parentName:"pre",className:"language-js"},"filesRouter.set('themes', 'dev/tools/grunt/configs/themes.loc.js');\n")),(0,i.mdx)("p",{parentName:"li"},"It must be added earlier, than the ",(0,i.mdx)("inlineCode",{parentName:"p"},"get()")," method with this alias is called.")),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"In the ",(0,i.mdx)("inlineCode",{parentName:"p"},"dev/tools/grunt/configs/"),' directory, create a copy of the default configuration file. Change its name by adding the ".loc" suffix. For example, your copy of ',(0,i.mdx)("inlineCode",{parentName:"p"},"themes.js")," will be ",(0,i.mdx)("inlineCode",{parentName:"p"},"themes.loc.js"),"."))),(0,i.mdx)("h3",{id:"how-to-use-a-custom-configuration-file"},"How to use a custom configuration file"),(0,i.mdx)("p",null,"To tell Grunt to use a custom configuration file, instead of the default one, add the following in your script:"),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Require file-router:"),(0,i.mdx)("pre",{parentName:"li"},(0,i.mdx)("code",{parentName:"pre",className:"language-js"},"var fileRouter = require('/files-router');\n"))),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Call the ",(0,i.mdx)("inlineCode",{parentName:"p"},"get(%file_alias%)")," method to get the configuration file."),(0,i.mdx)("pre",{parentName:"li"},(0,i.mdx)("code",{parentName:"pre",className:"language-js"},"var themes = fileRouter.get('themes');\n")))))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guide-tools-grunt-md-06c8358ead54a053e694.js.map
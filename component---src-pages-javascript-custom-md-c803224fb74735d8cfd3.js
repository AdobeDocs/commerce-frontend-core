"use strict";(self.webpackChunkcommerce_frontend_core=self.webpackChunkcommerce_frontend_core||[]).push([[2410],{27633:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return r},default:function(){return c}});var a,o=t(87462),i=t(63366),m=(t(15007),t(64983)),l=t(91515),d=["components"],r={},p=(a="InlineAlert",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,m.mdx)("div",e)}),u={_frontmatter:r},s=l.Z;function c(e){var n=e.components,t=(0,i.Z)(e,d);return(0,m.mdx)(s,(0,o.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,m.mdx)("h1",{id:"custom-javascript"},"Custom JavaScript"),(0,m.mdx)("p",null,"This topic discusses how to use custom ",(0,m.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/javascript"},"JavaScript")," components with the components provided by the application or custom replacement implementations."),(0,m.mdx)("p",null,"We strongly recommend that you do not change the source code of default components and widgets. All customizations must be implemented in custom modules or themes."),(0,m.mdx)("h2",{id:"add-a-custom-component"},"Add a custom component"),(0,m.mdx)("p",null,"To add a custom JS component (module), take the following steps:"),(0,m.mdx)("ol",null,(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"Place the custom component source file in one of the following locations:"),(0,m.mdx)("ul",{parentName:"li"},(0,m.mdx)("li",{parentName:"ul"},"Your theme JS files: ",(0,m.mdx)("inlineCode",{parentName:"li"},"<theme_dir>/web/js")," or ",(0,m.mdx)("inlineCode",{parentName:"li"},"<theme_dir>/<VendorName>_<ModuleName>/web/js"),". In this case the component is available in your theme and its ",(0,m.mdx)("a",{parentName:"li",href:"../guide/themes/inheritance.md"},"child themes"),"."),(0,m.mdx)("li",{parentName:"ul"},"Your module view JS files: ",(0,m.mdx)("inlineCode",{parentName:"li"},"<module_dir>/view/frontend/web/js"),". In this case, the component is available in all modules and themes (if your module is enabled)."))),(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"Optionally, in the corresponding ",(0,m.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/module"},"module")," or theme, create a ",(0,m.mdx)("inlineCode",{parentName:"p"},"requirejs-config.js")," configuration file, if it does not yet exist there and set path for your resource. The RequireJS configuration file can be placed in one of the following locations:"),(0,m.mdx)("ul",{parentName:"li"},(0,m.mdx)("li",{parentName:"ul"},"Your theme: ",(0,m.mdx)("inlineCode",{parentName:"li"},"<theme_dir>")),(0,m.mdx)("li",{parentName:"ul"},"Module within your theme: ",(0,m.mdx)("inlineCode",{parentName:"li"},"<theme_dir>/<module_dir>")),(0,m.mdx)("li",{parentName:"ul"},"Your module (depending on the needed area - ",(0,m.mdx)("strong",{parentName:"li"},"base"),", ",(0,m.mdx)("strong",{parentName:"li"},"frontend"),", ",(0,m.mdx)("strong",{parentName:"li"},"adminhtml"),"): ",(0,m.mdx)("inlineCode",{parentName:"li"},"<module_dir>/view/<area>"))))),(0,m.mdx)("h2",{id:"replace-a-default-component"},"Replace a default component"),(0,m.mdx)("p",null,"To use a custom implementation of an existing JS component:"),(0,m.mdx)("p",null,"Place the custom component source file in one of the following locations:"),(0,m.mdx)("ul",null,(0,m.mdx)("li",{parentName:"ul"},"Your theme JS files: ",(0,m.mdx)("inlineCode",{parentName:"li"},"/web/js")),(0,m.mdx)("li",{parentName:"ul"},"Your module view JS files: ",(0,m.mdx)("inlineCode",{parentName:"li"},"<module_dir>/view/frontend/web/js"))),(0,m.mdx)("p",null,"Create a RequireJS configuration file ",(0,m.mdx)("inlineCode",{parentName:"p"},"requirejs-config.js"),", having specified the following:"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-javascript"},'var config = {\n  "map": {\n    "*": {\n      "<default_component>": "<custom_component>"\n    }\n  }\n};\n')),(0,m.mdx)("ul",null,(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"<default_component>"),": the name of the default component you replace"),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"<custom_component>"),": the name of the custom component")),(0,m.mdx)("p",null,"For example, if you want to use a custom ",(0,m.mdx)("inlineCode",{parentName:"p"},"navigation-menu.js")," script instead of the default menu widgets, your ",(0,m.mdx)("inlineCode",{parentName:"p"},"requirejs-config.js")," should contain the following:"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-javascript"},'var config = {\n  "map": {\n    "*": {\n      "menu": "js/navigation-menu",\n      "mage/backend/menu": "js/navigation-menu"\n    }\n  }\n};\n')),(0,m.mdx)("p",null,"Place your ",(0,m.mdx)("inlineCode",{parentName:"p"},"requirejs-config.js")," file in one of the following directories (according to the location of your custom script, see step 1 of this procedure):"),(0,m.mdx)("ul",null,(0,m.mdx)("li",{parentName:"ul"},"Your ",(0,m.mdx)("a",{parentName:"li",href:"https://glossary.magento.com/theme"},"theme")," files: ",(0,m.mdx)("inlineCode",{parentName:"li"},"<theme_dir>")),(0,m.mdx)("li",{parentName:"ul"},"Your module view files: ",(0,m.mdx)("inlineCode",{parentName:"li"},"<module_dir>/view/frontend"))),(0,m.mdx)("p",null,"This way, your custom JS component is used instead of the ",(0,m.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/magento-component"},"component")," in all entries all over the ",(0,m.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/frontend"},"frontend")," area."),(0,m.mdx)("h2",{id:"extend-a-default-component"},"Extend a default component"),(0,m.mdx)("p",null,"You can add a custom JS component/widget, which will extend a default component/widget."),(0,m.mdx)("h3",{id:"extend-widget"},"Extend widget"),(0,m.mdx)("p",null,"To extend a default ",(0,m.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/jquery"},"jQuery")," widget, create ",(0,m.mdx)("inlineCode",{parentName:"p"},"<your_widget_name>.js")," with contents similar to the following:"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-javascript"},"define([\n  'jquery',\n  'jquery-ui-modules/widget', // use individual jQuery UI component if your widget is for frontend or base areas\n   // 'jquery/ui', // use all 'jquery/ui' library if your widget is for adminhtml area\n  'mage/<widget.name>' // usually widget can be found in /lib/web/mage dir\n], function($){\n\n  $.widget('<your_namespace>.<your_widget_name>', $.mage.<widget.name>, { ... });\n\n  return $.<your_namespace>.<your_widget_name>;\n});\n")),(0,m.mdx)("p",null,"Where the following notation is used:"),(0,m.mdx)("ul",null,(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"<your_namespace>.<your_widget_name>")," - the name of your custom ",(0,m.mdx)("a",{parentName:"li",href:"https://glossary.magento.com/widget"},"widget"),". According to the jQuery widgets naming convention, this value must contain a ",(0,m.mdx)("a",{parentName:"li",href:"https://glossary.magento.com/namespace"},"namespace")," and name."),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"mage.<widget.name>")," - the name of the widget that you extend.")),(0,m.mdx)(p,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,m.mdx)("p",null,"When using custom JS, try to keep dependencies to a minimum. Additional dependencies demand more web requests, which can slow rendering."),(0,m.mdx)(p,{variant:"success",slots:"text",mdxType:"InlineAlert"}),(0,m.mdx)("p",null,"All jQuery UI components for frontend and base areas are located in ",(0,m.mdx)("inlineCode",{parentName:"p"},"lib/web/jquery/ui-modules")," dir. They can be used in JS widgets by ",(0,m.mdx)("inlineCode",{parentName:"p"},"jquery-ui-modules")," path mapping like ",(0,m.mdx)("inlineCode",{parentName:"p"},"jquery-ui-modules/widget")," and ",(0,m.mdx)("inlineCode",{parentName:"p"},"jquery-ui-modules/slider"),".\nUsing individual jQuery UI components instead of the monolithic jQuery UI library improves storefront performance."),(0,m.mdx)("p",null,"For information about initializing your custom widget in a ",(0,m.mdx)("inlineCode",{parentName:"p"},".phtml")," template, see the ",(0,m.mdx)("a",{parentName:"p",href:"init.md"},"JavaScript initialization")," topic."),(0,m.mdx)("h3",{id:"extend-a-default-ui-component"},"Extend a default Ui component"),(0,m.mdx)("p",null,"To extend a default JS Ui component, your custom script must contain the following:"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-javascript"},"define([\n  '<component_path>'\n], function(<component_alias>){\n\n  return <component_alias>.extend({\n\n    defaults: { ... }, // properties with default values\n    ... // methods of your component\n  });\n});\n")),(0,m.mdx)("p",null,"Where the following notation is used:"),(0,m.mdx)("ul",null,(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"<component_path>"),": path to the default component that you extend"),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"<component_alias>"),": variable containing the default component that you extend")),(0,m.mdx)("p",null,"For example, ",(0,m.mdx)("inlineCode",{parentName:"p"},"Filters.js")," script extends the default ",(0,m.mdx)("inlineCode",{parentName:"p"},"filters.js"),":"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-javascript"},"define([\n  'Magento_Ui/js/grid/filters/filters'\n], function(Filters){\n\n  return Filters.extend({\n\n    defaults: { ... }, // properties with default values\n    ... // methods of your component\n  });\n});\n")),(0,m.mdx)("p",null,"For information about initializing your custom JS component in a ",(0,m.mdx)("inlineCode",{parentName:"p"},".phtml")," template, see the ",(0,m.mdx)("a",{parentName:"p",href:"init.md"},"JavaScript initialization")," topic."),(0,m.mdx)("p",null,"If you need to enable the loading of default JS components and widget initialization on a certain stage, add the following code in your JS script:"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-javascript"},"$(mage.apply);\n")))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-javascript-custom-md-c803224fb74735d8cfd3.js.map
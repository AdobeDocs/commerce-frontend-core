"use strict";(self.webpackChunkcommerce_frontend_core=self.webpackChunkcommerce_frontend_core||[]).push([[7882],{61681:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return d},default:function(){return p}});var n=a(87462),o=a(45987),r=(a(35776),a(3905)),i=a(91515);const l=["components"],d={},m={_frontmatter:d},s=i.Z;function p(e){let{components:t}=e,a=(0,o.Z)(e,l);return(0,r.mdx)(s,(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"add-a-custom-toolbar"},"Add a custom toolbar"),(0,r.mdx)("p",null,"This topic shows you how to implement an inline toolbar for your content type. You can see an example of a toolbar in Page Builder's Heading content type, as shown here:"),(0,r.mdx)("p",null,(0,r.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1070px"}},"\n      ",(0,r.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"12.187500000000002%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,r.mdx)("picture",{parentName:"span"},"\n          ",(0,r.mdx)("source",{parentName:"picture",srcSet:["/commerce-frontend-core/static/3ebf70b3519a82eb4e57452a4bd926c0/5530d/toolbar.webp 320w","/commerce-frontend-core/static/3ebf70b3519a82eb4e57452a4bd926c0/0c8fb/toolbar.webp 640w","/commerce-frontend-core/static/3ebf70b3519a82eb4e57452a4bd926c0/6606d/toolbar.webp 1070w"],sizes:"(max-width: 1070px) 100vw, 1070px",type:"image/webp"}),"\n          ",(0,r.mdx)("source",{parentName:"picture",srcSet:["/commerce-frontend-core/static/3ebf70b3519a82eb4e57452a4bd926c0/dd4a7/toolbar.png 320w","/commerce-frontend-core/static/3ebf70b3519a82eb4e57452a4bd926c0/0f09e/toolbar.png 640w","/commerce-frontend-core/static/3ebf70b3519a82eb4e57452a4bd926c0/ca019/toolbar.png 1070w"],sizes:"(max-width: 1070px) 100vw, 1070px",type:"image/png"}),"\n          ",(0,r.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-frontend-core/static/3ebf70b3519a82eb4e57452a4bd926c0/ca019/toolbar.png",alt:"Page Builder toolbar",title:"Page Builder toolbar",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,r.mdx)("p",null,"Toolbars provide end-users with a quick way to change common properties of your content type (such as text alignment and heading types) without needing to open the full editor. The toolbar does not replace the need for form fields in the editor; it simply extends those fields."),(0,r.mdx)("h2",{id:"how-the-toolbar-works"},"How the Toolbar works"),(0,r.mdx)("p",null,"The diagram below shows the basic steps for adding a toolbar to your content type. It also shows how the various parts connect and work together."),(0,r.mdx)("p",null,(0,r.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,r.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"72.8125%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,r.mdx)("picture",{parentName:"span"},"\n          ",(0,r.mdx)("source",{parentName:"picture",srcSet:["/commerce-frontend-core/static/994649b081044249e7455caf5a66c8da/5530d/how-toolbars-work.webp 320w","/commerce-frontend-core/static/994649b081044249e7455caf5a66c8da/0c8fb/how-toolbars-work.webp 640w","/commerce-frontend-core/static/994649b081044249e7455caf5a66c8da/94b1e/how-toolbars-work.webp 1280w","/commerce-frontend-core/static/994649b081044249e7455caf5a66c8da/d9bc9/how-toolbars-work.webp 1702w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,r.mdx)("source",{parentName:"picture",srcSet:["/commerce-frontend-core/static/994649b081044249e7455caf5a66c8da/dd4a7/how-toolbars-work.png 320w","/commerce-frontend-core/static/994649b081044249e7455caf5a66c8da/0f09e/how-toolbars-work.png 640w","/commerce-frontend-core/static/994649b081044249e7455caf5a66c8da/bbbf7/how-toolbars-work.png 1280w","/commerce-frontend-core/static/994649b081044249e7455caf5a66c8da/526f1/how-toolbars-work.png 1702w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,r.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-frontend-core/static/994649b081044249e7455caf5a66c8da/bbbf7/how-toolbars-work.png",alt:"Toolbar how it works",title:"Toolbar how it works",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,r.mdx)("h2",{id:"step-1-add-toolbar-options"},"Step 1: Add toolbar options"),(0,r.mdx)("p",null,"Toolbar options are the clickable items in a toolbar that represent the property values of a form field. For example, the Heading content type adds toolbar options for the ",(0,r.mdx)("inlineCode",{parentName:"p"},"text_align")," field from ",(0,r.mdx)("inlineCode",{parentName:"p"},"pagebuilder_base_form.xml"),". The Heading adds the values of the ",(0,r.mdx)("inlineCode",{parentName:"p"},"text_align")," field (",(0,r.mdx)("inlineCode",{parentName:"p"},"left"),", ",(0,r.mdx)("inlineCode",{parentName:"p"},"center"),", and ",(0,r.mdx)("inlineCode",{parentName:"p"},"right"),") as items on the toolbar, represented with the images provided by the icon CSS classes as shown here:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-js"},'[\n    {\n        key: "text_align",\n        type: "select",\n        values: [\n            {\n                value: "left",\n                label: "Left",\n                icon: "icon-pagebuilder-align-left",\n            },\n            {\n                value: "center",\n                label: "Center",\n                icon: "icon-pagebuilder-align-center",\n            },\n            {\n                value: "right",\n                label: "Right",\n                icon: "icon-pagebuilder-align-right",\n            }\n        ]\n    }\n]\n')),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"OptionInterface")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"ValueInterface")," define the structure of toolbar options. You can find these interfaces in ",(0,r.mdx)("inlineCode",{parentName:"p"},"magento2-page-builder/app/code/Magento/PageBuilder/view/adminhtml/web/ts/js/content-type-toolbar.types.ts"),". Descriptions of the elements follow:"),(0,r.mdx)("table",null,(0,r.mdx)("thead",{parentName:"table"},(0,r.mdx)("tr",{parentName:"thead"},(0,r.mdx)("th",{parentName:"tr",align:null},"Element"),(0,r.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,r.mdx)("tbody",{parentName:"table"},(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"key")),(0,r.mdx)("td",{parentName:"tr",align:null},"The field ",(0,r.mdx)("inlineCode",{parentName:"td"},"name")," you are binding to. For example: ",(0,r.mdx)("inlineCode",{parentName:"td"},'<field name="quote_css"...>'))),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"type")),(0,r.mdx)("td",{parentName:"tr",align:null},"The ",(0,r.mdx)("inlineCode",{parentName:"td"},"formElement")," of the key field. For example: ",(0,r.mdx)("inlineCode",{parentName:"td"},'<field ... formElement="select">'))),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"values")),(0,r.mdx)("td",{parentName:"tr",align:null},"Array of field option values.")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"value")),(0,r.mdx)("td",{parentName:"tr",align:null},"Field option value, such as a CSS class (as shown in the code example).")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"label")),(0,r.mdx)("td",{parentName:"tr",align:null},"Field option label, such as a label for a select option (as shown in the code example)")),(0,r.mdx)("tr",{parentName:"tbody"},(0,r.mdx)("td",{parentName:"tr",align:null},(0,r.mdx)("inlineCode",{parentName:"td"},"icon")),(0,r.mdx)("td",{parentName:"tr",align:null},"CSS class name for the icon to display in the toolbar to represent the field's option. If you don't include a CSS class, the toolbar will display the label instead.")))),(0,r.mdx)("h2",{id:"step-2-create-toolbar-instance"},"Step 2: Create ",(0,r.mdx)("inlineCode",{parentName:"h2"},"Toolbar")," instance"),(0,r.mdx)("p",null,"To create an instance of the Page Builder toolbar in your ",(0,r.mdx)("inlineCode",{parentName:"p"},"preview.js")," component:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"Import Page Builder's ",(0,r.mdx)("inlineCode",{parentName:"strong"},"Toolbar")," class")," (",(0,r.mdx)("inlineCode",{parentName:"li"},"'Magento_PageBuilder/js/content-type-toolbar'"),")"),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"Call the toolbar constructor.")," The ",(0,r.mdx)("inlineCode",{parentName:"li"},"Toolbar")," constructor requires an array of toolbar options (",(0,r.mdx)("inlineCode",{parentName:"li"},"this.toolbar = new Toolbar(this, this.getToolbarOptions());"),"). You can find Page Builder's ",(0,r.mdx)("inlineCode",{parentName:"li"},"Toolbar")," class in ",(0,r.mdx)("inlineCode",{parentName:"li"},"Magento/PageBuilder/view/adminhtml/web/ts/js/content-type-toolbar.ts"),".")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-js"},"define([\n    'Magento_PageBuilder/js/content-type/preview',\n    'Magento_PageBuilder/js/content-type-toolbar',\n], function (PreviewBase, Toolbar) {\n    'use strict';\n\n    function Preview(parent, config, stageId) {\n        PreviewBase.call(this, parent, config, stageId);\n        this.toolbar = new Toolbar(this, this.getToolbarOptions());\n    }\n});\n")),(0,r.mdx)("h2",{id:"step-3-add-toolbar-markup"},"Step 3: Add toolbar markup"),(0,r.mdx)("p",null,"Within your ",(0,r.mdx)("inlineCode",{parentName:"p"},"preview.html")," template, use a ",(0,r.mdx)("inlineCode",{parentName:"p"},"div")," element (with CSS class and events) to wrap whichever element in your template you want the toolbar to act on. For example, the custom ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/commerce-docs/pagebuilder-examples/blob/master/Quote/Custom/view/adminhtml/web/template/content-type/custom-quote/default/preview.html"},"Quote content type")," wraps its ",(0,r.mdx)("inlineCode",{parentName:"p"},"<blockquote>")," element within a ",(0,r.mdx)("inlineCode",{parentName:"p"},"div")," with the toolbar's CSS class and event binding, as shown here:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-html"},'\x3c!--preview.html--\x3e\n<div attr="data.main.attributes" ko-style="data.main.style" class="pagebuilder-content-type" css="data.main.css" event="{ mouseover: onMouseOver, mouseout: onMouseOut }, mouseoverBubble: false">\n    <render args="getOptions().template"/>\n    <div class="pagebuilder-toolbar-container"\n         tabindex="0"\n         event="{ focusin: toolbar.onFocusIn, focusout: toolbar.onFocusOut }">\n        <with args="toolbar">\n            <render args="template"/>\n        </with>\n        <blockquote class="quote-content" attr="data.quote.attributes" css="data.quote.css" ko-style="data.quote.style" data-bind="liveEdit: { field: \'quote_text\', placeholder: $t(\'Enter Quote\') }"></blockquote>\n    </div>\n    <div class="quote-author" attr="data.author.attributes" ko-style="data.author.style" css="data.author.css" data-bind="liveEdit: { field: \'quote_author\', placeholder: $t(\'Enter Author\') }"></div>\n    <div class="quote-description" attr="data.author_title.attributes" ko-style="data.author_title.style" css="data.author_title.css" data-bind="liveEdit: { field: \'quote_author_desc\', placeholder: $t(\'Enter Description\') }"></div>\n</div>\n')),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Line 4:")," Use this CSS class to correctly format and control the screen placement of the toolbar when the wrapped HTML element receives focus."),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Line 5:")," Set a ",(0,r.mdx)("inlineCode",{parentName:"p"},"tabindex")," of 0 to ensure that the ",(0,r.mdx)("inlineCode",{parentName:"p"},"div")," wrapper is part of the default focus order for tabbing."),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Line 6:")," Use the the Toolbar's ",(0,r.mdx)("inlineCode",{parentName:"p"},"onFocusIn")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"onFocusOut")," methods to handle the events for ",(0,r.mdx)("inlineCode",{parentName:"p"},"focusin")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"focusout"),"."),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Lines 7-9:")," Add the toolbar's HTML template as returned from your ",(0,r.mdx)("inlineCode",{parentName:"p"},"toolbar")," instance of the ",(0,r.mdx)("inlineCode",{parentName:"p"},"Toolbar")," class."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-js"},'export default class Toolbar {\n    get template(): string {\n        return "Magento_PageBuilder/content-type-toolbar";\n    }\n}\n')),(0,r.mdx)("p",null,"You can find this HTML template here: ",(0,r.mdx)("inlineCode",{parentName:"p"},"/Magento/PageBuilder/view/adminhtml/web/template/content-type-toolbar.html"),"."),(0,r.mdx)("h2",{id:"example-code"},"Example code"),(0,r.mdx)("p",null,"The following links show how the Heading implements its toolbar within its ",(0,r.mdx)("inlineCode",{parentName:"p"},"preview.html")," template and ",(0,r.mdx)("inlineCode",{parentName:"p"},"preview.js")," component:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"/Magento/PageBuilder/view/adminhtml/web/template/content-type/heading/default/preview.html")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("inlineCode",{parentName:"li"},"/Magento/PageBuilder/view/adminhtml/web/ts/js/content-type/heading/preview.ts"))))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-page-builder-content-types-customize-add-custom-toolbar-md-9906ea264e6f7d2849f2.js.map
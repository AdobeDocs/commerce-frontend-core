{"version":3,"file":"component---src-pages-page-builder-architecture-data-store-md-d16a5c1d0483b41712c2.js","mappings":"uSAQaA,EAAe,CAAC,EACvBC,EAAc,CAClBD,gBAEIE,EAAYC,EAAAA,EACH,SAASC,EAAT,GAGZ,IAHgC,WACjCC,GAEC,EADEC,GACF,YACD,OAAO,SAACJ,GAAD,UAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,eAG5E,eACE,GAAM,2BACH,4BACL,kBAAK,4iBACL,eACE,GAAM,UACH,WACL,kBAAK,kDAAgD,uBAAYC,WAAW,KAAM,eAA4B,mCAAiC,uBAAYA,WAAW,KAAM,aAA0B,0GAAwG,uBAAYA,WAAW,KAAM,eAA4B,2BACvW,qBAAK,iBAAMA,WAAW,MAClB,UAAa,eACV,sCAEP,eACE,GAAM,UACH,WACL,kBAAK,iKAA+J,uBAAYA,WAAW,KAAM,aAA0B,oDAC3N,qBAAK,iBAAMA,WAAW,MAClB,UAAa,eACV,8HAMP,eACE,GAAM,OACH,QACL,eACE,GAAM,uCACL,uBAAYA,WAAW,MAAO,+CACjC,kBAAK,kJACL,eACE,GAAM,oBACL,uBAAYA,WAAW,MAAO,wBACjC,kBAAK,uEACL,eACE,GAAM,iCACL,uBAAYA,WAAW,MAAO,wCACjC,kBAAK,mEACL,eACE,GAAM,kBACL,uBAAYA,WAAW,MAAO,sBACjC,kBAAK,uDACL,eACE,GAAM,SACH,UACL,kBAAK,8VACL,qBAAK,iBAAMA,WAAW,MAClB,UAAa,uBACV,yrBA4BV,CAEDJ,EAAWK,gBAAiB,C","sources":["webpack://commerce-frontend-core/./src/pages/page-builder/architecture/data-store.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/commerce-frontend-core/commerce-frontend-core/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"page-builder-data-store\"\n    }}>{`Page Builder data store`}</h1>\n    <p>{`The data store is a utility class that stores the user's input data for a content type. When Page Builder creates a content type, either from the master storage format or from a user dragging and dropping a content type, Page Builder also creates a data store instance for that content type. Whenever the user modifies a content type, either by editing it on the stage or from the UI component form, Page Builder updates the data store with the new data. The master format and preview both fetch the data required for their render from the data store.`}</p>\n    <h2 {...{\n      \"id\": \"access\"\n    }}>{`Access`}</h2>\n    <p>{`The data store is available for access on the `}<inlineCode parentName=\"p\">{`ContentType`}</inlineCode>{` implementation, using the key `}<inlineCode parentName=\"p\">{`dataStore`}</inlineCode>{`. If you are within a preview or master component, you must first access the content type through the `}<inlineCode parentName=\"p\">{`contentType`}</inlineCode>{` property, as follows:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`Preview.contentType.dataStore;\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"events\"\n    }}>{`Events`}</h2>\n    <p>{`The data store maintains its own event system. It does not use the global events system used by Page Builder. As a result, you need to create an instance of `}<inlineCode parentName=\"p\">{`dataStore`}</inlineCode>{` and subscribe to its data changes, as follows:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`var dataStore = self.contentType.dataStore;\n\ndataStore.subscribe(() => {\n    // handler to update content type\n});\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"api\"\n    }}>{`API`}</h2>\n    <h3 {...{\n      \"id\": \"getkey-string-defaultvalue-any-any\"\n    }}><inlineCode parentName=\"h3\">{`get(key: string, defaultValue?: any): any`}</inlineCode></h3>\n    <p>{`Retrieve a single value from the content type's data store based on its key. You can provide an optional default value if no data is present.`}</p>\n    <h3 {...{\n      \"id\": \"getstate-object\"\n    }}><inlineCode parentName=\"h3\">{`getState(): object`}</inlineCode></h3>\n    <p>{`Get the entire state object for the current content type instance.`}</p>\n    <h3 {...{\n      \"id\": \"setkey-string-value-any-void\"\n    }}><inlineCode parentName=\"h3\">{`set(key: string, value: any): void`}</inlineCode></h3>\n    <p>{`Set a single piece of data into the content type's data store.`}</p>\n    <h3 {...{\n      \"id\": \"setstate-void\"\n    }}><inlineCode parentName=\"h3\">{`setState(): void`}</inlineCode></h3>\n    <p>{`Set the entire state for the current content type.`}</p>\n    <h2 {...{\n      \"id\": \"usage\"\n    }}>{`Usage`}</h2>\n    <p>{`You can use the data store to modify your content type when its data changes. For example, the Page Builder native Tabs content type (magento2-page-builder/app/code/Magento/PageBuilder/view/adminhtml/web/ts/js/content-type/tabs/preview.ts) subscribes to the data store and makes updates to it when a tab-item changes, as show here in TypeScript:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`...\n    args.contentType.dataStore.subscribe(() => {\n        this.updateTabNamesInDataStore();\n    });\n...\n\n/**\n* Update data store with active options\n*/\nprivate updateTabNamesInDataStore() {\n    const activeOptions: ActiveOptionsInterface[] = [];\n    this.contentType.children().forEach((tab: ContentTypeInterface, index: number) => {\n        const tabData = tab.dataStore.getState();\n        activeOptions.push({\n            label: tabData.tab_name.toString(),\n            labeltitle: tabData.tab_name.toString(),\n            value: index,\n        });\n    });\n\n    this.contentType.dataStore.set(\n        \"_default_active_options\",\n        activeOptions,\n    );\n}\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"sourceRoot":""}